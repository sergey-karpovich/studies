@model Company.Models.Project
@{
    ViewData["Title"]="Project Employee junction";
    Layout="_Layout";
}

<form asp-action="Update" method="post" class="p-2">
    <input type="hidden" name="id" value="@Model.ProjectID" />    
    <table class="table table-striped table-sm">
        <tr>
            <td>Project</td>
            <td>Employees</td>
        </tr>        
        <tr>
            <th>@Model.ProjectName</th>
            <th>
                @foreach (Employee e in ViewBag.Employee)
                {
                    <div class="form-row">
                        <div class="form-group col-1">
                           @if(e.ProjectsEmployees?.Any(s=>s.ProjectId==Model.ProjectID)==true)
                            {
                                <input type="checkbox" name="pids" value="@e.EmployeeId" checked class="form-check-input" />
                            }else{
                                <input type="checkbox" name="pids" value="@e.EmployeeId" class="form-check-input" />
                            }                               
                        </div>
                        <div class="form-group col">
                            <label class="form-control-label">@e.FirstName</label>
                        </div>
                        <div class="form-group col">
                            <label class="form-control-label">@e.LastName</label>
                        </div>            
                    </div>
                }
            </th>   
        </tr>
    </table> 
    <div class="text-center">
        <button class="btn btn-primary" type="submit">Save</button>
        <a asp-action="Index" class="btn btn-secondary">Cancel</a>
    </div>
</form>
